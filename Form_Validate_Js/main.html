<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Form validation with JavaScript</title>
  <link rel="stylesheet" href="style.css">
</head>
<body style="background-color: black">
  <div id="wrapper">
   <form  method="POST" id="vform" onsubmit="Validate()"  name="vform"  >
    <fieldset>
    <legend><b><mark>Registration Form</mark></b></legend> 
    <div id="username_div">
      <label>Firstname</label> <br>
      <input type="text" name="username" class="textInput">
      <div id="name_error"></div>
    </div>
    <br>
    <div id="lname_div">
      <label>Lastname</label> <br>
      <input type="text" name="lname" class="textInput">
      <div id="lname_error"></div>
    </div>
    <br>
    <div id="dob_div">
      <label>DOB</label> <br>
      <input type="date" name="dob" class="textInput">
      <div id="dob_error"></div>
    </div>
    <br>
    <div id="email_div">
      <label>Email</label> <br>
      <input type="text" name="email" class="textInput">
      <div id="email_error"></div>
    </div>
    <br>
    <div id="gender_div">
      <label>Gender</label>
      <input type="radio" name="gender" value="Male" >Male
      <input type="radio" name="gender" value="Female" >Female
      <div id="gender_error"></div>
    </div><br/>
      <div id="phone_div">
      <label>Phone Number</label> <br>
      <input type="text" name="phone" class="textInput">
      <div id="phone_error"></div>
    </div><br/>
    <div id="add_div">
      <label>Address</label> <br>
      <textarea type="text" name="add" rows=5 cols=35 ></textarea>
      <div id="add_error"></div>
    </div>
    <br>
    <div id = "skill_div">
      <label>Skills</label> <br>
      <div id="Skillset"></div>
        <!-- <input type="checkbox" name="skill" value="Python">Python
        <input type="checkbox" name="skill" value="C">C
        <input type="checkbox" name="skill" value="C++">C++
        <input type="checkbox" name="skill" value="JAVA">JAVA
        <input type="checkbox" name="skill" value="R">R

        <input type="checkbox" name="skill" value="Ruby">Ruby
        <input type="checkbox" name="skill" value="Github">Github
        <input type="checkbox" name="skill" value="Scala">Scala
        <input type="checkbox" name="skill" value="HTML">HTML
        <input type="checkbox" name="skill" value="CSS">CSS

        <input type="checkbox" name="skill" value="Javascript">Javascript
        <input type="checkbox" name="skill" value="React">React
        <input type="checkbox" name="skill" value="IBM Cloud">IBM Cloud
        <input type="checkbox" name="skill" value="DBMS">DBMS
        <input type="checkbox" name="skill" value="MySql">MySql

        <input type="checkbox" name="skill" value="Linux">Linux
        <input type="checkbox" name="skill" value="Management">Management
        <input type="checkbox" name="skill" value="Marketing">Marketing
        <input type="checkbox" name="skill" value="GO">GO
        <input type="checkbox" name="skill" value="Django">Django<br/> -->
        <div id="skill_error"></div>
      </div><br/>
      <div id="city_div">
        <label>City</label>
              <select name="city" >
              <option value=""></option>
              <option value="Ahmedabad">Ahmedabad</option>
              <option value="Gandhinagar">Gandhinagar</option>
              <option value="Vadodra">Vadodra</option>
              <option value="Rajkot">Rajkot</option>
              <option value="Jamnagar">Jamnagar</option>
          </select><br>
           <div id="city_error"></div>
      </div><br/>

            <div id="state_div">
        <label>State</label>
              <select name="state" >
              <option value=""></option>
              <option value="Gujarat">Gujarat</option>
              <option value="Delhi">Delhi</option>
              <option value="Rajasthan">Rajasthan</option>
              <option value="Mahrastra">Mahrastra</option>
              <option value="Madhya Pradesh">Madhya Pradesh</option>
          </select><br>
           <div id="state_error"></div>
      </div><br/>
      <div id="country_div">
        <label>Country</label>
              <select name="country" >
              <option value=""></option>
              <option value="India">India</option>
              <option value="Nepal">Nepal</option>
              <option value="Canada">Canada</option>
              <option value="USA">USA</option>
              <option value="Australia">Australia</option>
          </select><br>
           <div id="country_error"></div>
      </div><br/>

    <div>
    <input type="submit" name="register" id="submit" value="Register" class="btn">
    </div>
    </fieldset>
    <script type="text/javascript" src="main.js"></script>
<!--     <script>
      function getskills(){
        fetch('http:localhost:3000/api/skills')
        .then(response => {
          console.log(response)
          response.json()
        })
        .then(data => {
          console.log(data)
          data.forEach((item)=>{
            console.log(item["Skill_name"]);
            document.getElementById("Skillset").innerHTML=`<input type="checkbox" name="skill" value="${item["Skill_name"]}">${item["Skill_name"]}`
          })
        })
        .catch(err=>console.log("Skill not fetched"))
      }
      
    </script> -->
<!--     <script>
        window.onload=function(){
          var myForm = document.getElementById('vform');
          myForm.addEventListener('submit', function(event){
              event.preventDefault();
              var formData = new FormData(myForm),
              result = {};
        for (var entry of formData.entries())
              {
                result[entry[0]] = entry[1];
              }
            //  result1 = JSON.stringify(result)
              // console.log(result);
              // document.getElementById("md").innerHTML=result1;
              result2=[]
          var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            for (var checkbox of checkboxes) {
            // document.body.append(checkbox.value + ' ');
              result2.push(checkbox.value)
            }
            const post_data = {
            ...result,
            'Skills': result2
        };
        fetch('http://localhost:3000/api/add', {
          method: 'POST',
          headers: {
            'Content-type': 'application/json'
          },
          body: JSON.stringify(post_data)
        })
        .then(res => {
          // document.getElementById("post").innerHTML="Data Inserted"
          console.log("Data In")
        })
        .catch(err=>{
          console.log("Error")
          document.getElementById("post").innerHTML = "Sorry! Error Detected";
        })  
        // result=JSON.stringify(result);
      });
      }
    </script> -->
    <p id="post"></p>
   </form>
  </div>
</body>
</html>

